# minikube
virsh list

# local
MONGO_STATE_DB_HOST="mongodb://datadb-mongodb-replicaset/?replicaSet=rs0" TASK="UPDATE_AUDIENCE" ts-node server.ts 

# kubectl
kubectl --kubeconfig=Documents/videobolt/bin/stage/kubeconfig get pods
kubectl --kubeconfig=/home/nemanja/Documents/videobolt/bin/stage/kubeconfig delete pods $(kubectl --kubeconfig=/home/nemanja/Documents/videobolt/bin/stage/kubeconfig get pods | grep Completed | awk '{print $1}')
kubectl --kubeconfig=/home/nemanja/Documents/videobolt/bin/stage/kubeconfig delete pods $(kubectl --kubeconfig=/home/nemanja/Documents/videobolt/bin/stage/kubeconfig get pods | grep Evicted | awk '{print $1}')

# ports
sudo netstat -plant | grep :80

# vb
vb deploy --bolts openvpn,nginx,logdb,datadb
vb deploy --bolts public-http-ingress,protected-ingress,env-ingress,upload-ingress,public-ingress
vb restore-db
vb deploy --bolts helm-init,prometheus-common,prometheus,kubernetes-dashboard,log-uploader,video-streamer,sgbounce,streaming,admin,analytics-calc,cacher,api-gateway
vb deploy --bolts update-render-status,update-finance-totals,replenish-subscriptions,expire-subscriptions,update-palettes,author-payouts,update-render-time,send-emails

get all --all-namespaces


##### STAGE 20.02.2020.
vb delete-k8s --env stage --force
vb start-k8s --env stage --force
vb deploy --bolts logdb,datadb --env stage --force
vb deploy --bolts openvpn,nginx,helm-init --env stage --force
vb deploy --bolts public-http-ingress,protected-ingress,env-ingress,upload-ingress,public-ingress --env stage --force
sudo vb restore-db --env stage --force
vb deploy --bolts prometheus-common,prometheus,kubernetes-dashboard,log-uploader,video-streamer --env stage --force
vb deploy --bolts sgbounce,streaming,admin,cacher,api-gateway --env stage --force
vb deploy --bolts site,render --env stage --force
vb deploy --bolts update-render-status,update-finance-totals,replenish-subscriptions,expire-subscriptions,update-palettes,author-payouts,update-render-time,send-emails --env stage --force


{
    "repos": {
        "java-core": {
            "branch": "kafka_and_protobuf_depre"
        },
        "api-gateway": {
            "branch": "kafka_and_protobuf_depre"
        },
        "periodic-tasks": {
            "branch": "kafka_and_protobuf_depre"
        }
    }
}


nemanja@nv-ubuntu:~$ sudo ifconfig vnet0 down
nemanja@nv-ubuntu:~$ sudo ifconfig vnet1 down
nemanja@nv-ubuntu:~$ sudo ifconfig virbr0 down
nemanja@nv-ubuntu:~$ sudo ifconfig virbr1 down



# OTHER

# ifconfig
enp3s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.0.33  netmask 255.255.255.0  broadcast 192.168.0.255
        inet6 fe80::f6b5:20ff:fe1f:aecb  prefixlen 64  scopeid 0x20<link>
        ether f4:b5:20:1f:ae:cb  txqueuelen 1000  (Ethernet)
        RX packets 301384  bytes 432992745 (432.9 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 160828  bytes 11936009 (11.9 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 3603063  bytes 298251699 (298.2 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 3603063  bytes 298251699 (298.2 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

wlxe8de2720d0ab: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.0.36  netmask 255.255.255.0  broadcast 192.168.0.255
        inet6 fe80::eade:27ff:fe20:d0ab  prefixlen 64  scopeid 0x20<link>
        ether e8:de:27:20:d0:ab  txqueuelen 1000  (Ethernet)
        RX packets 473  bytes 112700 (112.7 KB)
        RX errors 0  dropped 95  overruns 0  frame 0
        TX packets 95  bytes 18992 (18.9 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0


# ifconfig after docker
docker0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255
        ether 02:42:c3:1e:ea:8f  txqueuelen 0  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

enp3s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.0.33  netmask 255.255.255.0  broadcast 192.168.0.255
        inet6 fe80::6bc8:e27e:cd19:dee1  prefixlen 64  scopeid 0x20<link>
        ether f4:b5:20:1f:ae:cb  txqueuelen 1000  (Ethernet)
        RX packets 164132  bytes 235919909 (235.9 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 85689  bytes 6111229 (6.1 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 1794  bytes 159383 (159.3 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 1794  bytes 159383 (159.3 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

virbr0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255
        ether 52:54:00:cd:ee:dd  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0



