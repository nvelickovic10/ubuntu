#!/bin/bash
# This script is used to check connection ant to connect to FLEX servers

SCRIPT_DESC="This script is used to check connection ant to connect to FLEX servers"
commons_dir="/usr/local/bin/common"

# Include common functions
. ${commons_dir}/common.sh

# Include array util
. ${commons_dir}/arrayUtil.sh

LEVEL="$1"
SERVER="$2"

LEVELS="app1 app2 ui1 ui2"
SERVERS="dev42 dev43 qa43"
HAS_ERROR=0

array_contains "${LEVELS}" "${LEVEL}"
if [ $? -eq 1 ];
then
  echo "Invalid level: $LEVEL"
  echo "PLEASE USE ANY OF: ${LEVELS}"
  HAS_ERROR=1
fi

array_contains "${SERVERS}" "${SERVER}"
if [ $? -eq 1 ];
then
  echo "Invalid server: $SERVER"
  echo "PLEASE USE ANY OF: ${SERVERS[*]}"
  HAS_ERROR=1
fi

if [ $HAS_ERROR -eq 1 ]
then
  exit 0
fi

URL="tmweb@$LEVEL.tmflex.$SERVER.coresys.tmcs"

ssh $URL

# End